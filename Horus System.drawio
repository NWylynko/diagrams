<mxfile host="app.diagrams.net" modified="2021-07-25T06:41:55.987Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36" etag="igyqazCZDPDzLlZjS42r" version="14.9.2" type="github">
  <diagram id="nPcvH1GQvYh_hTLvzfsL" name="Page-1">
    <mxGraphModel dx="4063" dy="2429" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="2336" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="nfuZQFnSO84eK-1PtAOt-130" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1170" y="90" width="270" height="200" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-21" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1210" y="1019" width="320" height="310" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.01;entryY=0.201;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-32" target="nfuZQFnSO84eK-1PtAOt-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-141" value="Request JWT for user on sign in" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-116">
          <mxGeometry x="-0.2482" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-32" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="420" width="280" height="240" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.012;entryY=0.143;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-17" target="nfuZQFnSO84eK-1PtAOt-103">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="800" />
              <mxPoint x="990" y="1079" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-121" value="New Permission" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-112">
          <mxGeometry x="0.6595" y="1" relative="1" as="geometry">
            <mxPoint x="-17" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-17" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="690" width="260" height="220" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-1" target="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="270" y="1101" />
              <mxPoint x="270" y="1101" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-101" value="Hydrate client side W/ JWT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-100">
          <mxGeometry x="-0.1471" y="-3" relative="1" as="geometry">
            <mxPoint x="-3" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="640" y="465" as="targetPoint" />
            <Array as="points">
              <mxPoint x="350" y="465" />
              <mxPoint x="350" y="465" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-111" value="Request Website" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-110">
          <mxGeometry x="-0.2362" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-1" target="nfuZQFnSO84eK-1PtAOt-117">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="285" />
              <mxPoint x="500" y="285" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-120" value="Websocket Connection W/ JWT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-119">
          <mxGeometry x="-0.1409" y="5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-1" value="Clients Browser" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="210" width="120" height="1020" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-4" target="nfuZQFnSO84eK-1PtAOt-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-4" value="Permissions API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="1345" y="1134.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-6" target="nfuZQFnSO84eK-1PtAOt-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-6" target="nfuZQFnSO84eK-1PtAOt-42">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="854" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-6" value="Tasks &amp;amp; Timers API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="680" y="701" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-9" value="Tasks Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="810" y="701" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-13" value="Permissions API" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1460" y="1134.5" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-2" target="nfuZQFnSO84eK-1PtAOt-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="785" y="520" />
              <mxPoint x="785" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.036;entryY=0.152;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="820" as="targetPoint" />
            <mxPoint x="640" y="500" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="350" y="500" />
              <mxPoint x="350" y="822" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-82" value="Request User data server side W/ JWT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-81">
          <mxGeometry x="0.0797" y="-2" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-2" target="nfuZQFnSO84eK-1PtAOt-142">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="779" y="560" />
              <mxPoint x="779" y="590" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-2" value="Nextjs server side rendered web app with Next-Auth" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="660" y="500" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-8" value="Auth Database&lt;br&gt;(defined by next-auth)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="820" y="440" width="70" height="90" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-42" value="Tasks Cache" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="810" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-27" target="nfuZQFnSO84eK-1PtAOt-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-27" target="nfuZQFnSO84eK-1PtAOt-130">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-140" value="Check if A user is currently online" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-138">
          <mxGeometry x="-0.296" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-27" value="JWT Manager&lt;br&gt;&lt;br&gt;Generates pub/private keys at interval, stores them in google cloud secrets&lt;br&gt;&lt;br&gt;on request (http and pubsub) will generate a JWT token for the client&lt;br&gt;&lt;br&gt;on request will supply public keys used in use&lt;br&gt;&lt;br&gt;old keys need to be cleaned up from google cloud secrets on an interval&lt;br&gt;&lt;br&gt;Keep the private keys very very private to this service" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="390" width="180" height="440" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.005;entryY=0.333;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-51" target="nfuZQFnSO84eK-1PtAOt-103">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="960" y="1038" />
              <mxPoint x="960" y="1130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-122" value="New Permission" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-113">
          <mxGeometry x="0.5467" y="-1" relative="1" as="geometry">
            <mxPoint x="-27" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-51" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="928" width="260" height="220" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-54" target="nfuZQFnSO84eK-1PtAOt-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-54" target="nfuZQFnSO84eK-1PtAOt-56">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="1092" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-54" value="Teams API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="680" y="939" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-55" value="Teams Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="810" y="939" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-56" value="Teams Cache" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="1048" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-57" target="nfuZQFnSO84eK-1PtAOt-103">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="960" y="1280" />
              <mxPoint x="960" y="1175" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-123" value="New Permission" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-114">
          <mxGeometry x="0.3794" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-57" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="1170" width="260" height="220" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-60" target="nfuZQFnSO84eK-1PtAOt-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-60" target="nfuZQFnSO84eK-1PtAOt-62">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="1334" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-60" value="Organisations API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="680" y="1181" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-61" value="Organisations&lt;br&gt;Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="810" y="1181" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-62" value="Organisations&lt;br&gt;Cache" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="1290" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.005;entryY=0.655;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-63" target="nfuZQFnSO84eK-1PtAOt-103">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="1520" />
              <mxPoint x="990" y="1216" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-124" value="New Permission" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-115">
          <mxGeometry x="0.0832" y="-3" relative="1" as="geometry">
            <mxPoint x="117" y="-37" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-63" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="1410" width="260" height="220" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-66" target="nfuZQFnSO84eK-1PtAOt-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-66" target="nfuZQFnSO84eK-1PtAOt-68">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="1574" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-66" value="Clients &amp;amp; Projects&amp;nbsp;API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="680" y="1421" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-67" value="Clients Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="810" y="1421" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-68" value="Clients Cache" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="770" y="1530" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="741" as="targetPoint" />
            <Array as="points">
              <mxPoint x="615" y="870" />
              <mxPoint x="615" y="741" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-76" value="Request tasks for a user" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-72">
          <mxGeometry x="-0.5607" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="979" as="targetPoint" />
            <Array as="points">
              <mxPoint x="615" y="1030" />
              <mxPoint x="615" y="979" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-77" value="Request Teams of a user" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-73">
          <mxGeometry x="-0.4094" y="-3" relative="1" as="geometry">
            <mxPoint x="8" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="1221" as="targetPoint" />
            <Array as="points">
              <mxPoint x="615" y="1170" />
              <mxPoint x="615" y="1221" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-78" value="Request the users organisations" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-74">
          <mxGeometry x="-0.3317" y="1" relative="1" as="geometry">
            <mxPoint x="19" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-69">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="1461" as="targetPoint" />
            <Array as="points">
              <mxPoint x="615" y="1390" />
              <mxPoint x="615" y="1461" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-79" value="Request the clients for a user" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-75">
          <mxGeometry x="-0.4506" y="3" relative="1" as="geometry">
            <mxPoint x="23" y="13" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-69" value="API Gateway&lt;br&gt;&lt;br&gt;This can and should verify the JWT so the microservices can be simpler&lt;br&gt;&lt;br&gt;The security risk with this is that a hacker takes control of one of the microservices and is then able to access other ones without a valid JWT&lt;br&gt;&lt;br&gt;the solutions to this is to make cross microservice request go through the api gateway and not have access to each other over the network&lt;br&gt;&lt;br&gt;The microservices still need to verify the permissions stored in the jwt&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="701" width="120" height="799" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-86" value="Google Secrets" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1530" y="570" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-103" target="nfuZQFnSO84eK-1PtAOt-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-103" target="nfuZQFnSO84eK-1PtAOt-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-126" value="Add permission to Users JWT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-125">
          <mxGeometry x="0.1172" y="-1" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-103" value="Permissions PubSub" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="1040" width="81" height="269" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-117" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="170" width="320" height="230" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-118" target="nfuZQFnSO84eK-1PtAOt-128">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="789" y="270" />
              <mxPoint x="789" y="234" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-134" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-118" target="nfuZQFnSO84eK-1PtAOt-133">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="804" y="300" />
              <mxPoint x="804" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-118" value="UserEvents API&lt;br&gt;(Web Sockets)" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="680" y="245" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-127" value="User Status" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1339" y="100" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-128" value="WebSockets&lt;br&gt;Reddis" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="817" y="190" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-131" target="nfuZQFnSO84eK-1PtAOt-127">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1310" y="170" />
              <mxPoint x="1310" y="140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.16;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-131" target="nfuZQFnSO84eK-1PtAOt-132">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1300" y="190" />
              <mxPoint x="1300" y="234" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-131" value="User Status API" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="1200" y="140" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-132" value="User Cache" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1309" y="190" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.004;entryY=0.459;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-133" target="nfuZQFnSO84eK-1PtAOt-130">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-139" value="on Connect &amp;amp; Disconnect" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="nfuZQFnSO84eK-1PtAOt-137">
          <mxGeometry x="0.4679" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-133" value="WebSocket&lt;br&gt;PubSub" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="847" y="280" width="73" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-142" value="Website&lt;br&gt;PubSub" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="817" y="540" width="73" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-148" value="" style="rounded=0;whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="2280" y="140" width="380" height="190" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-149" value="User Status Schema (SQL)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2290" y="150" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-150" value="Users" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="2310" y="190" width="140" height="104" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-151" value="userId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-150">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-152" value="online" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-150">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-153" value="service" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-150">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-156" value="the web application for which they are connected to currently. So these three attributes make up the primary key" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2510" y="190" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-153" target="nfuZQFnSO84eK-1PtAOt-156">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-160" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1820" y="380" width="420" height="260" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-161" value="Tasks &amp;amp; Timers Schema (NoSQL)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1820" y="390" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-162" value="Tasks" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="1850" y="430" width="140" height="182" as="geometry">
            <mxRectangle x="1850" y="430" width="60" height="26" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-163" value="id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-177" value="userId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-178" value="projectId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-164" value="name" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-165" value="billable" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="130" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-176" value="timers" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-162">
          <mxGeometry y="156" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-166" value="Timers" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="2080" y="430" width="140" height="104" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-167" value="id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-166">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-168" value="startTime" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-166">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-169" value="endTime" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-166">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.001;entryY=0.117;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-176" target="nfuZQFnSO84eK-1PtAOt-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-180" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2280" y="380" width="420" height="260" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-181" value="Tasks &amp;amp; Timers Schema (SQL)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2280" y="390" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-182" value="Tasks" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="2310" y="430" width="140" height="156" as="geometry">
            <mxRectangle x="1850" y="430" width="60" height="26" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-183" value="id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-182">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-184" value="userId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-182">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-185" value="projectId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-182">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-186" value="name" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-182">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-187" value="billable" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-182">
          <mxGeometry y="130" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-189" value="Timers" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="2540" y="430" width="140" height="130" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-190" value="id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-189">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-194" value="timerId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-189">
          <mxGeometry y="52" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-191" value="startTime" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-189">
          <mxGeometry y="78" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-192" value="endTime" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-189">
          <mxGeometry y="104" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-194" target="nfuZQFnSO84eK-1PtAOt-183">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-196" value="" style="rounded=0;whiteSpace=wrap;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="2030" y="180" width="210" height="150" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-197" value="User Status Schema (NoSQL)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2040" y="190" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-198" value="Users" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="2060" y="230" width="150" height="78" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-199" value="userId" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-198">
          <mxGeometry y="26" width="150" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-201" value="[service]: online (boolean)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="nfuZQFnSO84eK-1PtAOt-198">
          <mxGeometry y="52" width="150" height="26" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-204" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="1760" width="660" height="490" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-205" value="" style="endArrow=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-204" target="nfuZQFnSO84eK-1PtAOt-204">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="2010" as="sourcePoint" />
            <mxPoint x="640" y="1960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-206" value="Aggregators" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="250" y="1770" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-207" value="Store All Required Data (optimistic replication)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="480" y="1770" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-208" value="" style="endArrow=none;html=1;exitX=-0.005;exitY=0.084;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-204">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="1990" as="sourcePoint" />
            <mxPoint x="793" y="1798" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-209" value="Example" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="1810" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-210" value="An Aggregator for the Tasks and Clients Services, it gets all the clients a user has access to and all the tasks a user has, then maps over the tasks and matches the projectId with the projects the clients have, so tasks have projectName and clientName to display&lt;br&gt;&lt;br&gt;essentially a network inner join" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="1800" width="330" height="110" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-215" value="SQL: two extra tables get added to the tasks database, projects and clients, the ids and names are stored in this, on request a join is used to get the names from the ids stored in the tasks&lt;br&gt;NoSQL: when a task is added the projectName and clientName attributes are added to the object as well as the projectId&lt;br&gt;Updates: to update this data the tasks API listens to the Clients PubSub events for updates for eventual consistency" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="1800" width="330" height="130" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-216" value="" style="endArrow=none;dashed=1;html=1;entryX=0;entryY=0.397;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="nfuZQFnSO84eK-1PtAOt-204">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="790" y="1955" as="sourcePoint" />
            <mxPoint x="640" y="1840" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-217" value="Pros" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="1950" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-218" value="simple, easily supports NoSQL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="1960" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-219" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=0.001;exitY=0.613;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-204">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="1890" as="sourcePoint" />
            <mxPoint x="789" y="2059" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-220" value="Adds latency, coupling between this &quot;fake&quot; service and the real services it fetches from" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="2060" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-221" value="low latency, no coupling to other services" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="1960" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-222" value="is eventually consistent, lots of events being consumed, will have to update potentially thousands of rows if using NoSQL, if using SQL basically having full replication of other services just for internal use" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="2060" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-223" value="Cons" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="2070" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-225" value="" style="endArrow=none;dashed=1;html=1;exitX=0;exitY=0.815;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.001;entryY=0.815;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="nfuZQFnSO84eK-1PtAOt-204" target="nfuZQFnSO84eK-1PtAOt-204">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="2010" as="sourcePoint" />
            <mxPoint x="630" y="1960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-228" value="Thoughts" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="2170" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-229" value="It is pushed that this aggregation must be done server side, in its own micro-service, but there is no reason you couldn&#39;t do this client side (or atleast inside the nextJs web app)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="2160" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nfuZQFnSO84eK-1PtAOt-230" value="storing data is very cheap, but this seems like a form of over optimisation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="2160" width="330" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
